{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nvar PRIMARY_IP = '100.69.116.48';\nvar FALLBACK_IP = '192.168.43.147';\nvar DB_CONFIG = {\n  host: PRIMARY_IP,\n  port: 5432,\n  database: 'microgrid_db',\n  tables: {\n    meter: 'meter_data',\n    solar: 'solar_data'\n  },\n  columns: {\n    meter: {\n      timestamp: 'time',\n      id: 'meter_id',\n      voltage: 'voltage',\n      current: 'current',\n      power: 'power',\n      energy: 'energy',\n      pf: 'pf',\n      frequency: 'frequency'\n    },\n    solar: {\n      timestamp: 'time',\n      id: 'panel_id',\n      voltage: 'voltage',\n      current: 'current',\n      power: 'power'\n    }\n  }\n};\nvar PRIMARY_API_URL = 'http://100.69.116.48:3001';\nvar FALLBACK_API_URL = 'http://192.168.43.205:3001';\nvar API_BASE_URL = PRIMARY_API_URL;\nvar AnalyticsService = function () {\n  function AnalyticsService() {\n    _classCallCheck(this, AnalyticsService);\n    this.isConnected = false;\n    this.usingFallback = false;\n  }\n  return _createClass(AnalyticsService, [{\n    key: \"fetchWithFallback\",\n    value: function () {\n      var _fetchWithFallback = _asyncToGenerator(function* (endpoint) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        try {\n          var response = yield fetch(`${API_BASE_URL}${endpoint}`, options);\n          if (!response.ok) throw new Error(`HTTP ${response.status}`);\n          return response;\n        } catch (error) {\n          if (API_BASE_URL === PRIMARY_API_URL && !this.usingFallback) {\n            console.log('Primary API failed, trying fallback...');\n            API_BASE_URL = FALLBACK_API_URL;\n            this.usingFallback = true;\n            var _response = yield fetch(`${API_BASE_URL}${endpoint}`, options);\n            if (!_response.ok) throw new Error(`HTTP ${_response.status}`);\n            return _response;\n          }\n          throw error;\n        }\n      });\n      function fetchWithFallback(_x) {\n        return _fetchWithFallback.apply(this, arguments);\n      }\n      return fetchWithFallback;\n    }()\n  }, {\n    key: \"formatDateForQuery\",\n    value: function formatDateForQuery(date) {\n      var year = date.getFullYear();\n      var month = String(date.getMonth() + 1).padStart(2, '0');\n      var day = String(date.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    }\n  }, {\n    key: \"getTableName\",\n    value: function getTableName(sourceType) {\n      return sourceType === 'Meter' ? DB_CONFIG.tables.meter : DB_CONFIG.tables.solar;\n    }\n  }, {\n    key: \"fetchAnalyticsData\",\n    value: function () {\n      var _fetchAnalyticsData = _asyncToGenerator(function* (sourceType, filterValue, fromDateStr, toDateStr) {\n        try {\n          var tableName = this.getTableName(sourceType);\n          console.log('Fetching analytics data:', {\n            sourceType: sourceType,\n            filterValue: filterValue,\n            fromDateStr: fromDateStr,\n            toDateStr: toDateStr,\n            tableName: tableName\n          });\n          var response = yield this.fetchWithFallback('/api/analytics', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              table: tableName,\n              sourceType: sourceType,\n              filterColumn: sourceType === 'Meter' ? 'meter_id' : 'panel_id',\n              filterValue: filterValue,\n              fromDate: fromDateStr,\n              toDate: toDateStr\n            })\n          });\n          if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n          }\n          var result = yield response.json();\n          console.log('API Response:', result);\n          if (result.success) {\n            return {\n              success: true,\n              data: result.data,\n              count: result.count,\n              message: 'Data fetched successfully'\n            };\n          } else {\n            return {\n              success: false,\n              data: [],\n              message: result.message || 'Failed to fetch data'\n            };\n          }\n        } catch (error) {\n          console.error('Error fetching analytics data:', error);\n          return {\n            success: false,\n            data: [],\n            message: error.message || 'Failed to fetch data'\n          };\n        }\n      });\n      function fetchAnalyticsData(_x2, _x3, _x4, _x5) {\n        return _fetchAnalyticsData.apply(this, arguments);\n      }\n      return fetchAnalyticsData;\n    }()\n  }, {\n    key: \"processDataForChart\",\n    value: function processDataForChart(rawData, sourceType) {\n      if (!rawData || rawData.length === 0) {\n        return {\n          chartData: [],\n          stats: {\n            avg: 0,\n            max: 0,\n            min: 0,\n            total: 0,\n            count: 0\n          }\n        };\n      }\n      var groupedData = {};\n      rawData.forEach(function (item) {\n        var timestamp = item.timestamp || item.time;\n        if (!timestamp) return;\n        var date = new Date(timestamp);\n        var dateKey;\n        if (rawData.length > 100) {\n          dateKey = date.toLocaleDateString('en-US', {\n            month: 'short',\n            day: 'numeric'\n          });\n        } else {\n          dateKey = date.toLocaleTimeString('en-US', {\n            hour: '2-digit',\n            minute: '2-digit',\n            hour12: false\n          });\n        }\n        if (!groupedData[dateKey]) {\n          groupedData[dateKey] = {\n            values: [],\n            count: 0\n          };\n        }\n        var value = parseFloat(item.power) || 0;\n        groupedData[dateKey].values.push(value);\n        groupedData[dateKey].count++;\n      });\n      var chartData = Object.keys(groupedData).map(function (label) {\n        var group = groupedData[label];\n        var avgValue = group.values.reduce(function (a, b) {\n          return a + b;\n        }, 0) / group.count;\n        return {\n          label: label,\n          value: avgValue\n        };\n      });\n      var allValues = rawData.map(function (item) {\n        return parseFloat(item.power) || 0;\n      }).filter(function (v) {\n        return !isNaN(v);\n      });\n      var stats = {\n        max: allValues.length > 0 ? Math.max.apply(Math, _toConsumableArray(allValues)) : 0,\n        min: allValues.length > 0 ? Math.min.apply(Math, _toConsumableArray(allValues.filter(function (v) {\n          return v > 0;\n        }))) : 0,\n        avg: allValues.length > 0 ? allValues.reduce(function (a, b) {\n          return a + b;\n        }, 0) / allValues.length : 0,\n        total: allValues.reduce(function (a, b) {\n          return a + b;\n        }, 0),\n        count: rawData.length\n      };\n      console.log('Processed chart data:', chartData.length, 'points');\n      console.log('Stats:', stats);\n      return {\n        chartData: chartData,\n        stats: stats\n      };\n    }\n  }, {\n    key: \"generateSampleData\",\n    value: function generateSampleData(sourceType, subOption, fromDate, toDate) {\n      var days = Math.ceil((toDate - fromDate) / (1000 * 60 * 60 * 24)) + 1;\n      var dataPoints = Math.min(days, 7);\n      var labels = [];\n      var values = [];\n      var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n      for (var i = 0; i < dataPoints; i++) {\n        var date = new Date(fromDate);\n        date.setDate(date.getDate() + i);\n        labels.push(`${months[date.getMonth()]} ${date.getDate()}`);\n        if (sourceType === 'Meter') {\n          values.push(Math.floor(Math.random() * 1500) + 500);\n        } else {\n          values.push(Math.floor(Math.random() * 1000) + 200);\n        }\n      }\n      var stats = {\n        peak: Math.max.apply(Math, values),\n        min: Math.min.apply(Math, values),\n        average: Math.round(values.reduce(function (a, b) {\n          return a + b;\n        }, 0) / values.length),\n        total: values.reduce(function (a, b) {\n          return a + b;\n        }, 0)\n      };\n      return {\n        labels: labels,\n        values: values,\n        stats: stats\n      };\n    }\n  }]);\n}();\nexport default new AnalyticsService();","map":{"version":3,"names":["PRIMARY_IP","FALLBACK_IP","DB_CONFIG","host","port","database","tables","meter","solar","columns","timestamp","id","voltage","current","power","energy","pf","frequency","PRIMARY_API_URL","FALLBACK_API_URL","API_BASE_URL","AnalyticsService","_classCallCheck","isConnected","usingFallback","_createClass","key","value","_fetchWithFallback","_asyncToGenerator","endpoint","options","arguments","length","undefined","response","fetch","ok","Error","status","error","console","log","fetchWithFallback","_x","apply","formatDateForQuery","date","year","getFullYear","month","String","getMonth","padStart","day","getDate","getTableName","sourceType","_fetchAnalyticsData","filterValue","fromDateStr","toDateStr","tableName","method","headers","body","JSON","stringify","table","filterColumn","fromDate","toDate","result","json","success","data","count","message","fetchAnalyticsData","_x2","_x3","_x4","_x5","processDataForChart","rawData","chartData","stats","avg","max","min","total","groupedData","forEach","item","time","Date","dateKey","toLocaleDateString","toLocaleTimeString","hour","minute","hour12","values","parseFloat","push","Object","keys","map","label","group","avgValue","reduce","a","b","allValues","filter","v","isNaN","Math","_toConsumableArray","generateSampleData","subOption","days","ceil","dataPoints","labels","months","i","setDate","floor","random","peak","average","round"],"sources":["E:/Projects/MicroGrid App/ai-chat updated 3/Microgrid-app/src/services/AnalyticsService.js"],"sourcesContent":["// Analytics Service - Handles database queries for analytics data\r\n// This service connects to the PostgreSQL database and fetches meter/solar data\r\n\r\n// Primary and fallback IPs\r\nconst PRIMARY_IP = '100.69.116.48';\r\nconst FALLBACK_IP = '192.168.43.147';\r\n\r\n// Database configuration (matching database.js)\r\nconst DB_CONFIG = {\r\n  host: PRIMARY_IP,\r\n  port: 5432,\r\n  database: 'microgrid_db',\r\n  tables: {\r\n    meter: 'meter_data',\r\n    solar: 'solar_data'\r\n  },\r\n  // Actual column names from database\r\n  columns: {\r\n    meter: {\r\n      timestamp: 'time',\r\n      id: 'meter_id',\r\n      voltage: 'voltage',\r\n      current: 'current',\r\n      power: 'power',\r\n      energy: 'energy',\r\n      pf: 'pf',\r\n      frequency: 'frequency'\r\n    },\r\n    solar: {\r\n      timestamp: 'time',\r\n      id: 'panel_id',\r\n      voltage: 'voltage',\r\n      current: 'current',\r\n      power: 'power'\r\n    }\r\n  }\r\n};\r\n\r\n// API Base URLs - Points to the backend server running on your local machine\r\n// The backend server (analyticsServer.js) connects to PostgreSQL\r\n// Primary IP will be tried first, then fallback\r\nconst PRIMARY_API_URL = 'http://100.69.116.48:3001';\r\nconst FALLBACK_API_URL = 'http://192.168.43.205:3001';\r\nlet API_BASE_URL = PRIMARY_API_URL;\r\n\r\nclass AnalyticsService {\r\n  constructor() {\r\n    this.isConnected = false;\r\n    this.usingFallback = false;\r\n  }\r\n\r\n  // Try API request with fallback\r\n  async fetchWithFallback(endpoint, options = {}) {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}${endpoint}`, options);\r\n      if (!response.ok) throw new Error(`HTTP ${response.status}`);\r\n      return response;\r\n    } catch (error) {\r\n      // If primary fails and we haven't tried fallback yet\r\n      if (API_BASE_URL === PRIMARY_API_URL && !this.usingFallback) {\r\n        console.log('Primary API failed, trying fallback...');\r\n        API_BASE_URL = FALLBACK_API_URL;\r\n        this.usingFallback = true;\r\n        const response = await fetch(`${API_BASE_URL}${endpoint}`, options);\r\n        if (!response.ok) throw new Error(`HTTP ${response.status}`);\r\n        return response;\r\n      }\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Format date for PostgreSQL query\r\n  formatDateForQuery(date) {\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    return `${year}-${month}-${day}`;\r\n  }\r\n\r\n  // Get table name based on source type\r\n  getTableName(sourceType) {\r\n    return sourceType === 'Meter' ? DB_CONFIG.tables.meter : DB_CONFIG.tables.solar;\r\n  }\r\n\r\n  // Fetch analytics data from the backend\r\n  async fetchAnalyticsData(sourceType, filterValue, fromDateStr, toDateStr) {\r\n    try {\r\n      const tableName = this.getTableName(sourceType);\r\n\r\n      console.log('Fetching analytics data:', {\r\n        sourceType,\r\n        filterValue,\r\n        fromDateStr,\r\n        toDateStr,\r\n        tableName\r\n      });\r\n\r\n      const response = await this.fetchWithFallback('/api/analytics', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          table: tableName,\r\n          sourceType: sourceType,\r\n          filterColumn: sourceType === 'Meter' ? 'meter_id' : 'panel_id',\r\n          filterValue: filterValue,\r\n          fromDate: fromDateStr,\r\n          toDate: toDateStr,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      console.log('API Response:', result);\r\n\r\n      if (result.success) {\r\n        return {\r\n          success: true,\r\n          data: result.data,\r\n          count: result.count,\r\n          message: 'Data fetched successfully'\r\n        };\r\n      } else {\r\n        return {\r\n          success: false,\r\n          data: [],\r\n          message: result.message || 'Failed to fetch data'\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching analytics data:', error);\r\n      return {\r\n        success: false,\r\n        data: [],\r\n        message: error.message || 'Failed to fetch data'\r\n      };\r\n    }\r\n  }\r\n\r\n  // Process raw data for chart display\r\n  processDataForChart(rawData, sourceType) {\r\n    if (!rawData || rawData.length === 0) {\r\n      return {\r\n        chartData: [],\r\n        stats: { avg: 0, max: 0, min: 0, total: 0, count: 0 }\r\n      };\r\n    }\r\n\r\n    // Group data by date/hour and calculate averages\r\n    const groupedData = {};\r\n    \r\n    rawData.forEach(item => {\r\n      // Use 'timestamp' (aliased from 'time' in the query)\r\n      const timestamp = item.timestamp || item.time;\r\n      if (!timestamp) return;\r\n      \r\n      const date = new Date(timestamp);\r\n      let dateKey;\r\n      \r\n      // If data spans multiple days, group by day; otherwise group by hour\r\n      if (rawData.length > 100) {\r\n        dateKey = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n      } else {\r\n        dateKey = date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });\r\n      }\r\n      \r\n      if (!groupedData[dateKey]) {\r\n        groupedData[dateKey] = { values: [], count: 0 };\r\n      }\r\n      \r\n      // Get the power value\r\n      const value = parseFloat(item.power) || 0;\r\n      \r\n      groupedData[dateKey].values.push(value);\r\n      groupedData[dateKey].count++;\r\n    });\r\n\r\n    // Convert to chart data format\r\n    const chartData = Object.keys(groupedData).map(label => {\r\n      const group = groupedData[label];\r\n      const avgValue = group.values.reduce((a, b) => a + b, 0) / group.count;\r\n      return {\r\n        label: label,\r\n        value: avgValue\r\n      };\r\n    });\r\n\r\n    // Calculate statistics\r\n    const allValues = rawData.map(item => parseFloat(item.power) || 0).filter(v => !isNaN(v));\r\n\r\n    const stats = {\r\n      max: allValues.length > 0 ? Math.max(...allValues) : 0,\r\n      min: allValues.length > 0 ? Math.min(...allValues.filter(v => v > 0)) : 0,\r\n      avg: allValues.length > 0 ? allValues.reduce((a, b) => a + b, 0) / allValues.length : 0,\r\n      total: allValues.reduce((a, b) => a + b, 0),\r\n      count: rawData.length\r\n    };\r\n\r\n    console.log('Processed chart data:', chartData.length, 'points');\r\n    console.log('Stats:', stats);\r\n\r\n    return { chartData, stats };\r\n  }\r\n\r\n  // Generate sample data for testing (when database is not available)\r\n  generateSampleData(sourceType, subOption, fromDate, toDate) {\r\n    const days = Math.ceil((toDate - fromDate) / (1000 * 60 * 60 * 24)) + 1;\r\n    const dataPoints = Math.min(days, 7);\r\n    \r\n    const labels = [];\r\n    const values = [];\r\n    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\n    \r\n    for (let i = 0; i < dataPoints; i++) {\r\n      const date = new Date(fromDate);\r\n      date.setDate(date.getDate() + i);\r\n      labels.push(`${months[date.getMonth()]} ${date.getDate()}`);\r\n      \r\n      // Generate realistic values based on source type\r\n      if (sourceType === 'Meter') {\r\n        // Meter power in Watts (500-2000W range)\r\n        values.push(Math.floor(Math.random() * 1500) + 500);\r\n      } else {\r\n        // Solar power in Watts (200-1200W range, peak during midday)\r\n        values.push(Math.floor(Math.random() * 1000) + 200);\r\n      }\r\n    }\r\n\r\n    const stats = {\r\n      peak: Math.max(...values),\r\n      min: Math.min(...values),\r\n      average: Math.round(values.reduce((a, b) => a + b, 0) / values.length),\r\n      total: values.reduce((a, b) => a + b, 0)\r\n    };\r\n\r\n    return { labels, values, stats };\r\n  }\r\n}\r\n\r\nexport default new AnalyticsService();\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}