{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nvar WEATHER_API_KEY = 'd8775601a4486e566e69e908c87962db';\nvar WEATHER_API_URL = 'https://api.openweathermap.org/data/2.5/weather';\nvar DEFAULT_LAT = 13.0827;\nvar DEFAULT_LON = 80.2707;\nvar DustDetectionService = function () {\n  function DustDetectionService() {\n    _classCallCheck(this, DustDetectionService);\n    this.weatherCache = null;\n    this.lastWeatherUpdate = null;\n    this.CACHE_DURATION = 10 * 60 * 1000;\n    this.TEMP_POWER_TABLE = {\n      10: {\n        min: 2.5,\n        max: 5\n      },\n      15: {\n        min: 2.5,\n        max: 5\n      },\n      20: {\n        min: 2.5,\n        max: 5\n      },\n      25: {\n        min: 2.5,\n        max: 5\n      },\n      29: {\n        min: 2.5,\n        max: 5\n      }\n    };\n    this.TEMP_RANGE = {\n      min: 10,\n      max: 29\n    };\n    this.POWER_RANGE = {\n      min: 2.5,\n      max: 5\n    };\n    this.STC_TEMPERATURE = 25;\n    this.TEMPERATURE_COEFFICIENT = -0.45;\n    this.DUST_THRESHOLD_PERCENT = 15;\n    this.LIGHT_DUST_THRESHOLD = 10;\n  }\n  return _createClass(DustDetectionService, [{\n    key: \"fetchWeatherData\",\n    value: function () {\n      var _fetchWeatherData = _asyncToGenerator(function* () {\n        var lat = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_LAT;\n        var lon = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_LON;\n        try {\n          if (this.weatherCache && this.lastWeatherUpdate) {\n            var timeSinceUpdate = Date.now() - this.lastWeatherUpdate;\n            if (timeSinceUpdate < this.CACHE_DURATION) {\n              return this.weatherCache;\n            }\n          }\n          var url = `${WEATHER_API_URL}?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}&units=metric`;\n          var response = yield fetch(url);\n          if (!response.ok) {\n            throw new Error(`Weather API error: ${response.status}`);\n          }\n          var data = yield response.json();\n          this.weatherCache = {\n            temperature: data.main.temp,\n            humidity: data.main.humidity,\n            clouds: data.clouds.all,\n            weather: data.weather[0].main,\n            description: data.weather[0].description,\n            location: data.name,\n            latitude: lat,\n            longitude: lon,\n            timestamp: new Date().toISOString()\n          };\n          this.lastWeatherUpdate = Date.now();\n          return this.weatherCache;\n        } catch (error) {\n          console.error('❌ Error fetching weather data:', error);\n          return null;\n        }\n      });\n      function fetchWeatherData() {\n        return _fetchWeatherData.apply(this, arguments);\n      }\n      return fetchWeatherData;\n    }()\n  }, {\n    key: \"calculateExpectedPower\",\n    value: function calculateExpectedPower(ratedPower, currentTemperature) {\n      if (currentTemperature >= this.TEMP_RANGE.min && currentTemperature <= this.TEMP_RANGE.max) {\n        return (this.POWER_RANGE.min + this.POWER_RANGE.max) / 2;\n      }\n      var tempDifference = currentTemperature - this.STC_TEMPERATURE;\n      var powerLossFactor = 1 + this.TEMPERATURE_COEFFICIENT / 100 * tempDifference;\n      var expectedPower = ratedPower * powerLossFactor;\n      return Math.max(0, expectedPower);\n    }\n  }, {\n    key: \"analyzeDustPresence\",\n    value: function analyzeDustPresence(actualPower, expectedPower, ratedPower) {\n      var currentTemp = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      if (actualPower <= 0 || expectedPower <= 0) {\n        return {\n          hasDust: false,\n          dustLevel: 'unknown',\n          efficiency: 0,\n          powerLoss: 0,\n          recommendation: 'Panel not generating power'\n        };\n      }\n      var hasDust = false;\n      var dustLevel = 'clean';\n      var recommendation = 'Panel is operating normally';\n      var efficiency = actualPower / expectedPower * 100;\n      var powerLossPercent = (expectedPower - actualPower) / expectedPower * 100;\n      if (currentTemp !== null && currentTemp >= this.TEMP_RANGE.min && currentTemp <= this.TEMP_RANGE.max) {\n        var min = this.POWER_RANGE.min;\n        var max = this.POWER_RANGE.max;\n        console.log(`Dust Check: Temp=${currentTemp}°C, Power=${actualPower}W, Range=${min}-${max}W`);\n        console.log(`Is outside range? ${actualPower < min || actualPower > max} (Power < ${min}? ${actualPower < min}, Power > ${max}? ${actualPower > max})`);\n        if (actualPower < min || actualPower > max) {\n          console.log(`→ DUST DETECTED`);\n          var powerDeficit = actualPower < min ? (min - actualPower) / min * 100 : 0;\n          hasDust = true;\n          if (actualPower < min) {\n            if (powerDeficit >= 15) {\n              dustLevel = 'heavy';\n              recommendation = `⚠️ Heavy dust detected! Power ${actualPower.toFixed(2)}W is below expected minimum ${min}W at ${currentTemp.toFixed(1)}°C`;\n            } else {\n              dustLevel = 'light';\n              recommendation = `⚠️ Light dust detected. Power ${actualPower.toFixed(2)}W is slightly below expected minimum ${min}W at ${currentTemp.toFixed(1)}°C`;\n            }\n            efficiency = actualPower / min * 100;\n            powerLossPercent = powerDeficit;\n          } else {\n            dustLevel = 'light';\n            recommendation = `⚠️ Power ${actualPower.toFixed(2)}W exceeds expected maximum ${max}W at ${currentTemp.toFixed(1)}°C. Check panel.`;\n            efficiency = actualPower / max * 100;\n            powerLossPercent = (actualPower - max) / max * 100;\n          }\n        } else {\n          hasDust = false;\n          dustLevel = 'clean';\n          efficiency = 100;\n          powerLossPercent = 0;\n          recommendation = `✅ Panel is clean. Power ${actualPower.toFixed(2)}W is within expected range ${min}-${max}W at ${currentTemp.toFixed(1)}°C`;\n        }\n        return {\n          hasDust: hasDust,\n          dustLevel: dustLevel,\n          efficiency: efficiency.toFixed(2),\n          powerLoss: powerLossPercent.toFixed(2),\n          actualPower: actualPower.toFixed(2),\n          expectedPower: `${min}-${max}`,\n          recommendation: recommendation\n        };\n      }\n      if (powerLossPercent >= this.DUST_THRESHOLD_PERCENT) {\n        hasDust = true;\n        dustLevel = 'heavy';\n        recommendation = '⚠️ Heavy dust detected! Clean panel immediately to restore efficiency';\n      } else if (powerLossPercent >= this.LIGHT_DUST_THRESHOLD) {\n        hasDust = true;\n        dustLevel = 'light';\n        recommendation = '⚠️ Light dust accumulation detected. Consider cleaning soon';\n      }\n      return {\n        hasDust: hasDust,\n        dustLevel: dustLevel,\n        efficiency: efficiency.toFixed(2),\n        powerLoss: powerLossPercent.toFixed(2),\n        actualPower: actualPower.toFixed(2),\n        expectedPower: expectedPower.toFixed(2),\n        recommendation: recommendation\n      };\n    }\n  }, {\n    key: \"checkPanelDust\",\n    value: function () {\n      var _checkPanelDust = _asyncToGenerator(function* (panelId, actualVoltage, actualCurrent, actualPower, ratedPower) {\n        try {\n          var weather = yield this.fetchWeatherData();\n          if (!weather) {\n            return {\n              success: false,\n              message: 'Could not fetch weather data'\n            };\n          }\n          var currentTemp = weather.temperature;\n          var expectedPower = this.calculateExpectedPower(ratedPower, currentTemp);\n          var dustAnalysis = this.analyzeDustPresence(actualPower, expectedPower, ratedPower, currentTemp);\n          return {\n            success: true,\n            panelId: panelId,\n            weather: {\n              temperature: currentTemp,\n              humidity: weather.humidity,\n              clouds: weather.clouds,\n              description: weather.description\n            },\n            dustAnalysis: dustAnalysis,\n            timestamp: new Date().toISOString()\n          };\n        } catch (error) {\n          console.error(`❌ Error checking dust on panel ${panelId}:`, error);\n          return {\n            success: false,\n            message: error.message\n          };\n        }\n      });\n      function checkPanelDust(_x, _x2, _x3, _x4, _x5) {\n        return _checkPanelDust.apply(this, arguments);\n      }\n      return checkPanelDust;\n    }()\n  }, {\n    key: \"checkAllPanels\",\n    value: function () {\n      var _checkAllPanels = _asyncToGenerator(function* (panelsData) {\n        var results = [];\n        for (var panel of panelsData) {\n          if (panel.voltage === '-' || panel.current === '-' || panel.power === '-') {\n            continue;\n          }\n          var voltage = parseFloat(panel.voltage);\n          var current = parseFloat(panel.current);\n          var power = parseFloat(panel.power);\n          var ratedPower = panel.ratedPower || 1000;\n          var result = yield this.checkPanelDust(panel.id, voltage, current, power, ratedPower);\n          results.push(result);\n        }\n        return results;\n      });\n      function checkAllPanels(_x6) {\n        return _checkAllPanels.apply(this, arguments);\n      }\n      return checkAllPanels;\n    }()\n  }, {\n    key: \"getDustSummary\",\n    value: function getDustSummary(dustResults) {\n      var totalPanels = dustResults.length;\n      var dustyPanels = dustResults.filter(function (r) {\n        return r.success && r.dustAnalysis.hasDust;\n      }).length;\n      var heavyDustPanels = dustResults.filter(function (r) {\n        return r.success && r.dustAnalysis.dustLevel === 'heavy';\n      }).length;\n      return {\n        totalPanels: totalPanels,\n        cleanPanels: totalPanels - dustyPanels,\n        dustyPanels: dustyPanels,\n        heavyDustPanels: heavyDustPanels,\n        needsCleaning: dustyPanels > 0\n      };\n    }\n  }]);\n}();\nexport default new DustDetectionService();","map":{"version":3,"names":["WEATHER_API_KEY","WEATHER_API_URL","DEFAULT_LAT","DEFAULT_LON","DustDetectionService","_classCallCheck","weatherCache","lastWeatherUpdate","CACHE_DURATION","TEMP_POWER_TABLE","min","max","TEMP_RANGE","POWER_RANGE","STC_TEMPERATURE","TEMPERATURE_COEFFICIENT","DUST_THRESHOLD_PERCENT","LIGHT_DUST_THRESHOLD","_createClass","key","value","_fetchWeatherData","_asyncToGenerator","lat","arguments","length","undefined","lon","timeSinceUpdate","Date","now","url","response","fetch","ok","Error","status","data","json","temperature","main","temp","humidity","clouds","all","weather","description","location","name","latitude","longitude","timestamp","toISOString","error","console","fetchWeatherData","apply","calculateExpectedPower","ratedPower","currentTemperature","tempDifference","powerLossFactor","expectedPower","Math","analyzeDustPresence","actualPower","currentTemp","hasDust","dustLevel","efficiency","powerLoss","recommendation","powerLossPercent","log","powerDeficit","toFixed","_checkPanelDust","panelId","actualVoltage","actualCurrent","success","message","dustAnalysis","checkPanelDust","_x","_x2","_x3","_x4","_x5","_checkAllPanels","panelsData","results","panel","voltage","current","power","parseFloat","result","id","push","checkAllPanels","_x6","getDustSummary","dustResults","totalPanels","dustyPanels","filter","r","heavyDustPanels","cleanPanels","needsCleaning"],"sources":["E:/Projects/MicroGrid App/ai-chat updated 4/Microgrid-app/src/services/DustDetectionService.js"],"sourcesContent":["// Dust Detection Service - Detects dust accumulation on solar panels\r\n// Uses weather API to get temperature and compares expected vs actual power output\r\n\r\nconst WEATHER_API_KEY = 'd8775601a4486e566e69e908c87962db';\r\nconst WEATHER_API_URL = 'https://api.openweathermap.org/data/2.5/weather';\r\n\r\n// Default location (can be configured)\r\nconst DEFAULT_LAT = 13.0827; // Chennai, India\r\nconst DEFAULT_LON = 80.2707;\r\n\r\nclass DustDetectionService {\r\n  constructor() {\r\n    this.weatherCache = null;\r\n    this.lastWeatherUpdate = null;\r\n    this.CACHE_DURATION = 10 * 60 * 1000; // 10 minutes\r\n    \r\n    // Temperature-to-Power reference table (based on real-world data)\r\n    // For temperature range 10-29°C, expected power is 2.5-5W\r\n    this.TEMP_POWER_TABLE = {\r\n      10: { min: 2.5, max: 5 },\r\n      15: { min: 2.5, max: 5 },\r\n      20: { min: 2.5, max: 5 },\r\n      25: { min: 2.5, max: 5 },\r\n      29: { min: 2.5, max: 5 },\r\n    };\r\n    \r\n    // Temperature range for dust detection\r\n    this.TEMP_RANGE = { min: 10, max: 29 };\r\n    this.POWER_RANGE = { min: 2.5, max: 5 };\r\n    \r\n    // Standard Test Conditions (STC) reference values\r\n    this.STC_TEMPERATURE = 25; // 25°C standard temperature\r\n    this.TEMPERATURE_COEFFICIENT = -0.45; // -0.45% per °C (typical for silicon panels)\r\n    \r\n    // Dust detection thresholds\r\n    this.DUST_THRESHOLD_PERCENT = 15; // 15% or more reduction indicates dust\r\n    this.LIGHT_DUST_THRESHOLD = 10; // 10-15% reduction\r\n  }\r\n\r\n  // Fetch current weather data\r\n  async fetchWeatherData(lat = DEFAULT_LAT, lon = DEFAULT_LON) {\r\n    try {\r\n      // Return cached data if still valid\r\n      if (this.weatherCache && this.lastWeatherUpdate) {\r\n        const timeSinceUpdate = Date.now() - this.lastWeatherUpdate;\r\n        if (timeSinceUpdate < this.CACHE_DURATION) {\r\n          return this.weatherCache;\r\n        }\r\n      }\r\n\r\n      const url = `${WEATHER_API_URL}?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}&units=metric`;\r\n      \r\n      const response = await fetch(url);\r\n      if (!response.ok) {\r\n        throw new Error(`Weather API error: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      \r\n      this.weatherCache = {\r\n        temperature: data.main.temp,\r\n        humidity: data.main.humidity,\r\n        clouds: data.clouds.all, // Cloud coverage percentage\r\n        weather: data.weather[0].main,\r\n        description: data.weather[0].description,\r\n        location: data.name,\r\n        latitude: lat,\r\n        longitude: lon,\r\n        timestamp: new Date().toISOString()\r\n      };\r\n      \r\n      this.lastWeatherUpdate = Date.now();\r\n      \r\n      return this.weatherCache;\r\n      \r\n    } catch (error) {\r\n      console.error('❌ Error fetching weather data:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Calculate expected power output based on temperature\r\n  // Uses lookup table for specific temperatures, otherwise uses formula\r\n  calculateExpectedPower(ratedPower, currentTemperature) {\r\n    // Check if temperature is within the defined range (10-25°C)\r\n    if (currentTemperature >= this.TEMP_RANGE.min && currentTemperature <= this.TEMP_RANGE.max) {\r\n      // Within the range, return the power range\r\n      return (this.POWER_RANGE.min + this.POWER_RANGE.max) / 2; // Return average for calculation\r\n    }\r\n\r\n    // Otherwise use formula: P_expected = P_rated * (1 + coefficient * (T_actual - T_stc))\r\n    const tempDifference = currentTemperature - this.STC_TEMPERATURE;\r\n    const powerLossFactor = 1 + (this.TEMPERATURE_COEFFICIENT / 100) * tempDifference;\r\n    const expectedPower = ratedPower * powerLossFactor;\r\n    \r\n    return Math.max(0, expectedPower); // Power cannot be negative\r\n  }\r\n\r\n  // Analyze if dust is present on the panel\r\n  analyzeDustPresence(actualPower, expectedPower, ratedPower, currentTemp = null) {\r\n    if (actualPower <= 0 || expectedPower <= 0) {\r\n      return {\r\n        hasDust: false,\r\n        dustLevel: 'unknown',\r\n        efficiency: 0,\r\n        powerLoss: 0,\r\n        recommendation: 'Panel not generating power'\r\n      };\r\n    }\r\n\r\n    let hasDust = false;\r\n    let dustLevel = 'clean';\r\n    let recommendation = 'Panel is operating normally';\r\n    let efficiency = (actualPower / expectedPower) * 100;\r\n    let powerLossPercent = ((expectedPower - actualPower) / expectedPower) * 100;\r\n\r\n    // Check if temperature is within the defined range (10-29°C)\r\n    if (currentTemp !== null && \r\n        currentTemp >= this.TEMP_RANGE.min && \r\n        currentTemp <= this.TEMP_RANGE.max) {\r\n      \r\n      const min = this.POWER_RANGE.min;\r\n      const max = this.POWER_RANGE.max;\r\n      \r\n      console.log(`Dust Check: Temp=${currentTemp}°C, Power=${actualPower}W, Range=${min}-${max}W`);\r\n      console.log(`Is outside range? ${actualPower < min || actualPower > max} (Power < ${min}? ${actualPower < min}, Power > ${max}? ${actualPower > max})`);\r\n      \r\n      // If actual power is NOT within the acceptable range (2.5-5W), dust detected\r\n      if (actualPower < min || actualPower > max) {\r\n        console.log(`→ DUST DETECTED`);\r\n        // Power is outside acceptable range - dust detected\r\n        const powerDeficit = actualPower < min ? ((min - actualPower) / min) * 100 : 0;\r\n        hasDust = true;\r\n        \r\n        if (actualPower < min) {\r\n          if (powerDeficit >= 15) {\r\n            dustLevel = 'heavy';\r\n            recommendation = `⚠️ Heavy dust detected! Power ${actualPower.toFixed(2)}W is below expected minimum ${min}W at ${currentTemp.toFixed(1)}°C`;\r\n          } else {\r\n            dustLevel = 'light';\r\n            recommendation = `⚠️ Light dust detected. Power ${actualPower.toFixed(2)}W is slightly below expected minimum ${min}W at ${currentTemp.toFixed(1)}°C`;\r\n          }\r\n          efficiency = (actualPower / min) * 100;\r\n          powerLossPercent = powerDeficit;\r\n        } else {\r\n          // Above maximum\r\n          dustLevel = 'light';\r\n          recommendation = `⚠️ Power ${actualPower.toFixed(2)}W exceeds expected maximum ${max}W at ${currentTemp.toFixed(1)}°C. Check panel.`;\r\n          efficiency = (actualPower / max) * 100;\r\n          powerLossPercent = ((actualPower - max) / max) * 100;\r\n        }\r\n      } else {\r\n        // Power is within acceptable range (2.5-5W) - panel is clean\r\n        hasDust = false;\r\n        dustLevel = 'clean';\r\n        efficiency = 100;\r\n        powerLossPercent = 0;\r\n        recommendation = `✅ Panel is clean. Power ${actualPower.toFixed(2)}W is within expected range ${min}-${max}W at ${currentTemp.toFixed(1)}°C`;\r\n      }\r\n\r\n      return {\r\n        hasDust,\r\n        dustLevel,\r\n        efficiency: efficiency.toFixed(2),\r\n        powerLoss: powerLossPercent.toFixed(2),\r\n        actualPower: actualPower.toFixed(2),\r\n        expectedPower: `${min}-${max}`,\r\n        recommendation\r\n      };\r\n    }\r\n\r\n    // Standard analysis using single expected power value\r\n    if (powerLossPercent >= this.DUST_THRESHOLD_PERCENT) {\r\n      hasDust = true;\r\n      dustLevel = 'heavy';\r\n      recommendation = '⚠️ Heavy dust detected! Clean panel immediately to restore efficiency';\r\n    } else if (powerLossPercent >= this.LIGHT_DUST_THRESHOLD) {\r\n      hasDust = true;\r\n      dustLevel = 'light';\r\n      recommendation = '⚠️ Light dust accumulation detected. Consider cleaning soon';\r\n    }\r\n\r\n    return {\r\n      hasDust,\r\n      dustLevel,\r\n      efficiency: efficiency.toFixed(2),\r\n      powerLoss: powerLossPercent.toFixed(2),\r\n      actualPower: actualPower.toFixed(2),\r\n      expectedPower: expectedPower.toFixed(2),\r\n      recommendation\r\n    };\r\n  }\r\n\r\n  // Main function to check dust on solar panel\r\n  async checkPanelDust(panelId, actualVoltage, actualCurrent, actualPower, ratedPower) {\r\n    try {\r\n      // Fetch current weather\r\n      const weather = await this.fetchWeatherData();\r\n      \r\n      if (!weather) {\r\n        return {\r\n          success: false,\r\n          message: 'Could not fetch weather data'\r\n        };\r\n      }\r\n\r\n      const currentTemp = weather.temperature;\r\n      \r\n      // Calculate expected power based on temperature\r\n      const expectedPower = this.calculateExpectedPower(ratedPower, currentTemp);\r\n      \r\n      // Analyze dust presence (pass current temperature for range checking)\r\n      const dustAnalysis = this.analyzeDustPresence(actualPower, expectedPower, ratedPower, currentTemp);\r\n      \r\n      return {\r\n        success: true,\r\n        panelId,\r\n        weather: {\r\n          temperature: currentTemp,\r\n          humidity: weather.humidity,\r\n          clouds: weather.clouds,\r\n          description: weather.description\r\n        },\r\n        dustAnalysis,\r\n        timestamp: new Date().toISOString()\r\n      };\r\n      \r\n    } catch (error) {\r\n      console.error(`❌ Error checking dust on panel ${panelId}:`, error);\r\n      return {\r\n        success: false,\r\n        message: error.message\r\n      };\r\n    }\r\n  }\r\n\r\n  // Check dust for multiple panels\r\n  async checkAllPanels(panelsData) {\r\n    const results = [];\r\n    \r\n    for (const panel of panelsData) {\r\n      if (panel.voltage === '-' || panel.current === '-' || panel.power === '-') {\r\n        continue; // Skip panels without data\r\n      }\r\n\r\n      const voltage = parseFloat(panel.voltage);\r\n      const current = parseFloat(panel.current);\r\n      const power = parseFloat(panel.power);\r\n      const ratedPower = panel.ratedPower || 1000; // Default 1000W if not specified\r\n\r\n      const result = await this.checkPanelDust(\r\n        panel.id,\r\n        voltage,\r\n        current,\r\n        power,\r\n        ratedPower\r\n      );\r\n\r\n      results.push(result);\r\n    }\r\n\r\n    return results;\r\n  }\r\n\r\n  // Get summary of all panels dust status\r\n  getDustSummary(dustResults) {\r\n    const totalPanels = dustResults.length;\r\n    const dustyPanels = dustResults.filter(r => r.success && r.dustAnalysis.hasDust).length;\r\n    const heavyDustPanels = dustResults.filter(\r\n      r => r.success && r.dustAnalysis.dustLevel === 'heavy'\r\n    ).length;\r\n\r\n    return {\r\n      totalPanels,\r\n      cleanPanels: totalPanels - dustyPanels,\r\n      dustyPanels,\r\n      heavyDustPanels,\r\n      needsCleaning: dustyPanels > 0\r\n    };\r\n  }\r\n}\r\n\r\nexport default new DustDetectionService();\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}